<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ì•„íŒŒíŠ¸ ì‹œë®¬ë ˆì´í„°</title>
<style>
body {
  font-family: sans-serif;
  background:#f4f4f4;
  padding:20px;
}
.container {
  display:flex;
  gap:20px;
}
.panel {
  background:white;
  padding:15px;
  border:1px solid #ccc;
  width:300px;
}
.log {
  height:300px;
  overflow-y:auto;
  border-top:1px solid #ddd;
  margin-top:10px;
  padding-top:10px;
  font-size:14px;
}
button {
  margin-top:5px;
}
</style>
</head>
<body>

<h1>ğŸ¢ ì•„íŒŒíŠ¸ ì‹œë®¬ë ˆì´í„°</h1>

<div class="container">

<!-- ì…ì£¼ë¯¼ ë“±ë¡ -->
<div class="panel">
  <h3>ì…ì£¼ë¯¼ ë“±ë¡</h3>
  <input id="name" placeholder="ì´ë¦„"><br>
  <input id="room" placeholder="í˜¸ì‹¤ (ì˜ˆ:101)"><br>
  <select id="personality">
    <option value="friendly">ë‹¤ì •í•¨</option>
    <option value="normal">ë³´í†µ</option>
    <option value="grumpy">ê¹Œì¹ í•¨</option>
  </select><br>
  <button onclick="addResident()">ë“±ë¡</button>

  <h4>ì…ì£¼ë¯¼ ëª©ë¡</h4>
  <ul id="residentList"></ul>
</div>

<!-- ë¡œê·¸ -->
<div class="panel">
  <h3>í™œë™ ë¡œê·¸</h3>
  <button onclick="nextDay()">â–¶ í•˜ë£¨ ì§„í–‰</button>
  <div class="log" id="log"></div>
</div>

</div>

<script>
let day = 1;
let residents = [];
let idCounter = 0;

function addResident(){
  const name = nameInput.value;
  const room = roomInput.value;
  const personality = personalitySelect.value;
  if(!name || !room) return;

  residents.push({
    id:idCounter++,
    name,
    room,
    personality,
    mood:50,
    relations:{}
  });

  renderResidents();
}

function renderResidents(){
  residentList.innerHTML="";
  residents.forEach(r=>{
    const li=document.createElement("li");
    li.innerText=`${r.name} (${r.room}) ğŸ˜Š${r.mood}`;
    residentList.appendChild(li);
  });
}

function log(text){
  const div=document.createElement("div");
  div.innerText=`[Day ${day}] ${text}`;
  logDiv.appendChild(div);
  logDiv.scrollTop=logDiv.scrollHeight;
}

function nextDay(){
  if(residents.length<2){
    log("ì¡°ìš©í•œ í•˜ë£¨ê°€ ì§€ë‚˜ê°”ë‹¤.");
    day++;
    return;
  }

  const a = randomResident();
  let b = randomResident(a.id);

  let change = 0;
  let talk = "";

  if(a.personality==="friendly"){ change=+5; talk="ì¦ê²ê²Œ ëŒ€í™”í–ˆë‹¤"; }
  if(a.personality==="normal"){ change=+1; talk="ê°€ë³ê²Œ ì¸ì‚¬í–ˆë‹¤"; }
  if(a.personality==="grumpy"){ change=-5; talk="ëŒ€í™”ê°€ ì–´ìƒ‰í–ˆë‹¤"; }

  a.mood = clamp(a.mood + change);
  b.mood = clamp(b.mood + change);

  log(`${a.name}(${a.room})ì™€ ${b.name}(${b.room})ëŠ” ${talk}.`);

  renderResidents();
  day++;
}

function randomResident(exceptId){
  let pool = residents.filter(r=>r.id!==exceptId);
  return pool[Math.floor(Math.random()*pool.length)];
}

function clamp(n){ return Math.max(0,Math.min(100,n)); }

const nameInput=document.getElementById("name");
const roomInput=document.getElementById("room");
const personalitySelect=document.getElementById("personality");
const residentList=document.getElementById("residentList");
const logDiv=document.getElementById("log");
</script>

</body>
</html>


